[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2017-04-11 01:02:37.965381", 
  "name": "Sales Order-Client", 
  "script": "frappe.ui.form.on(\"Sales Order\", {\n\trefresh: function(frm) {\n\t\tfrm.set_query(\"item_code\", \"items\", function(doc, cdt, cdn) {\n\t\t    return {\n\t\t        filters: { \"item_group\": \"Products\" }\n\t\t    };\n\t\t});\n\t\tif (cur_frm.doc.docstatus == 1) {\n\t\t\tadd_dispatch_order_button(frm);\n\t\t}\n\t},\n});\n\n\nfunction add_dispatch_order_button(frm) {\n\tfrm.add_custom_button(__('Dispatch Order'), function(){\n\t\tfrappe.call({\n\t\t\tmethod: \"lpeb_erpnext.api.make_dispatch_order_from_so\",\n\t\t\targs: {\"so\": frm.doc.name},\n\t\t\tfreeze: true,\n\t\t\tfreeze_message: __(\"Creating Dispatch Order\"),\n\t\t\tcallback: function(r){\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.msgprint(__(r.message));\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__(\"Dispatch Order could not be created. <br /> \" + r.exc));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}, __(\"Make\"));\n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Production Order", 
  "modified": "2017-04-14 10:02:59.737637", 
  "name": "Production Order-Client", 
  "script": "frappe.ui.form.on(\"Production Order\", {\n\t\"project\": function(frm) {\n\t\tfrappe.call({\n\t\t\tmethod: \"lpeb_erpnext.api.get_warehouses_for_project\",\n\t\t\targs: { project_name: cur_frm.doc.project},\n\t\t\tcallback: function(r) {\n\t\t\t\tif (r.message) {\n\t\t\t\t\tcur_frm.set_value(\"fg_warehouse\", r.message.qc_warehouse.name);\n\t\t\t\t}\n\t\t\t}\t\n\t\t})\n\t}\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2017-04-12 18:34:00.126715", 
  "name": "Sales Invoice-Client", 
  "script": "frappe.ui.form.on(\"Sales Invoice\", {\n\t\"refresh\": function(frm) {\n\t\tcur_frm.add_custom_button(__('Get Memo items'), function(){\n\t\t\tfrappe.call({\n\t\t\t\t\"method\": \"lpeb_erpnext.api.get_memo_details_for_si_items\",\n\t\t\t\t\"args\": { \"si_items\": cur_frm.doc.items, \"dispatch_order\": cur_frm.doc.dispatch_order },\n\t\t\t\t\"callback\": function(r) {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t$.each(r.message, function(index, item) {\n\t\t\t\t\t\t\tvar row = frappe.model.add_child(cur_frm.doc, \"LPEB Sales Invoice Item Detail\", \"accounts\");\n\t\t\t\t\t\t\trow.item_code = item.item_code;\n\t\t\t\t\t\t\trow.weight = item.weight;\n\t\t\t\t\t\t\trow.uom = item.uom;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n});\n", 
  "script_type": "Client"
 }
]